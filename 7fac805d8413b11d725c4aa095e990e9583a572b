{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "3e22d55e_516b7ee6",
        "filename": "web/fetcher.ts",
        "patchSetId": 1
      },
      "lineNbr": 91,
      "author": {
        "id": 1152670
      },
      "writtenOn": "2025-03-13T10:58:41Z",
      "side": 1,
      "message": "What if there are multiple jenkins servers configured and user is not logged in on one of these servers ?",
      "range": {
        "startLine": 91,
        "startChar": 15,
        "endLine": 91,
        "endChar": 22
      },
      "revId": "7fac805d8413b11d725c4aa095e990e9583a572b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "532bed20_71f78f64",
        "filename": "web/fetcher.ts",
        "patchSetId": 1
      },
      "lineNbr": 91,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2025-03-13T15:59:06Z",
      "side": 1,
      "message": "I don\u0027t think you can avoid logging into each of them since you can\u0027t know which ones will have jobs for this change.",
      "parentUuid": "3e22d55e_516b7ee6",
      "range": {
        "startLine": 91,
        "startChar": 15,
        "endLine": 91,
        "endChar": 22
      },
      "revId": "7fac805d8413b11d725c4aa095e990e9583a572b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "118f5138_10ed0955",
        "filename": "web/fetcher.ts",
        "patchSetId": 1
      },
      "lineNbr": 91,
      "author": {
        "id": 1152670
      },
      "writtenOn": "2025-03-17T13:12:07Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "532bed20_71f78f64",
      "range": {
        "startLine": 91,
        "startChar": 15,
        "endLine": 91,
        "endChar": 22
      },
      "revId": "7fac805d8413b11d725c4aa095e990e9583a572b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8e28140c_a657adfa",
        "filename": "web/fetcher.ts",
        "patchSetId": 1
      },
      "lineNbr": 96,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2025-03-17T07:37:33Z",
      "side": 1,
      "message": "What happens if the user is logged in but just doesn\u0027t have the permission to execute the query?",
      "range": {
        "startLine": 96,
        "startChar": 30,
        "endLine": 96,
        "endChar": 33
      },
      "revId": "7fac805d8413b11d725c4aa095e990e9583a572b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2a79139e_20cc3205",
        "filename": "web/fetcher.ts",
        "patchSetId": 1
      },
      "lineNbr": 96,
      "author": {
        "id": 1152670
      },
      "writtenOn": "2025-03-17T16:32:19Z",
      "side": 1,
      "message": "In that case user will get an empty response with status 200 (No Exception is thrown)",
      "parentUuid": "8e28140c_a657adfa",
      "range": {
        "startLine": 96,
        "startChar": 30,
        "endLine": 96,
        "endChar": 33
      },
      "revId": "7fac805d8413b11d725c4aa095e990e9583a572b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "61848898_99e08868",
        "filename": "web/fetcher.ts",
        "patchSetId": 1
      },
      "lineNbr": 99,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2025-03-13T15:59:06Z",
      "side": 1,
      "message": "Maybe use `window.open` and `popup` like [`gr-error-manager#createLoginPopup()`](https://gerrit.googlesource.com/gerrit/+/master/polygerrit-ui/app/elements/core/gr-error-manager/gr-error-manager.ts#475) does? Ideally that would mean the user doesn\u0027t need to hit back or manually reload the page.",
      "range": {
        "startLine": 99,
        "startChar": 31,
        "endLine": 99,
        "endChar": 53
      },
      "revId": "7fac805d8413b11d725c4aa095e990e9583a572b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6f1d2f2e_e31fc68c",
        "filename": "web/fetcher.ts",
        "patchSetId": 1
      },
      "lineNbr": 99,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2025-03-17T07:37:33Z",
      "side": 1,
      "message": "+1\nEspecially if there are multiple Jnekins instances, this would avoid fetching teh data all over again as often as there is a login required in one of the servers.",
      "parentUuid": "61848898_99e08868",
      "range": {
        "startLine": 99,
        "startChar": 31,
        "endLine": 99,
        "endChar": 53
      },
      "revId": "7fac805d8413b11d725c4aa095e990e9583a572b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "02157d32_0523bb42",
        "filename": "web/fetcher.ts",
        "patchSetId": 1
      },
      "lineNbr": 99,
      "author": {
        "id": 1152670
      },
      "writtenOn": "2025-03-17T13:12:07Z",
      "side": 1,
      "message": "I wanted to add a popup function something like below but unfortunately there\u0027s no reliable way to know if the popup is closed in case of [cors requests](https://developer.mozilla.org/en-US/docs/Web/API/Window/open#:~:text\u003dIf%20the%20Cross%2DOrigin%2DOpener%2DPolicy%20HTTP%20header%20is%20being%20used%2C%20and%20the%20document%20policies%20are%20such%20that%20the%20document%20is%20opened%20in%20a%20new%20browsing%20context%20group%2C%20references%20to%20the%20opened%20window%20are%20severed%20and%20the%20returned%20object%20will%20indicate%20that%20the%20opened%20window%20is%20closed%20(closed%20is%20true).). Additionally, it seems popups are not recommended, refer [this](https://developer.mozilla.org/en-US/docs/Web/API/Window/open#avoid_resorting_to_window.open). So maybe it\u0027ll be better to open a new tab for login ?\n```\n  private loginPopup(url: string) {\n    const width \u003d 600;\n    const height \u003d 400;\n    const left \u003d (screen.width - width) / 2;\n    const top \u003d (screen.height - height) / 2;\n    const win \u003d window.open(url, \u0027_blank\u0027, `popup,width\u003d${width},height\u003d${height},left\u003d${left},top\u003d${top}`);\n    if (win \u003d\u003d\u003d null) {\n      throw new Error(\"Could not open login popup\");\n    }\n    var timer \u003d setInterval(function (plugin: PluginApi) {\n      if (win.closed) {\n        clearInterval(timer);\n        plugin.checks().announceUpdate();\n      }\n    }, 1000, this.plugin);\n  }\n```",
      "parentUuid": "6f1d2f2e_e31fc68c",
      "range": {
        "startLine": 99,
        "startChar": 31,
        "endLine": 99,
        "endChar": 53
      },
      "revId": "7fac805d8413b11d725c4aa095e990e9583a572b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d46c2aff_6ad8e828",
        "filename": "web/fetcher.ts",
        "patchSetId": 1
      },
      "lineNbr": 99,
      "author": {
        "id": 1152670
      },
      "writtenOn": "2025-03-18T05:34:47Z",
      "side": 1,
      "message": "Another advantage of opening a new tab for logging in the user is that the checks API results are refreshed whenever the user switches back to the change detail tab, thereby eliminating the need to keep track of whether the new tab is closed or not.",
      "parentUuid": "02157d32_0523bb42",
      "range": {
        "startLine": 99,
        "startChar": 31,
        "endLine": 99,
        "endChar": 53
      },
      "revId": "7fac805d8413b11d725c4aa095e990e9583a572b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "40cec76b_d8f19b0e",
        "filename": "web/fetcher.ts",
        "patchSetId": 1
      },
      "lineNbr": 99,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2025-03-18T22:42:11Z",
      "side": 1,
      "message": "What if we add a new Jenkins endpoint in the `gerrit-checks` plugin that will do a redirect back to Gerrit? Then we don\u0027t need to use a popup and we don\u0027t make the user take extra manual actions. I don\u0027t know how that looks in the multiple Jenkins instances model Thomas pointed out.",
      "parentUuid": "d46c2aff_6ad8e828",
      "range": {
        "startLine": 99,
        "startChar": 31,
        "endLine": 99,
        "endChar": 53
      },
      "revId": "7fac805d8413b11d725c4aa095e990e9583a572b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "235e9675_c7b156cc",
        "filename": "web/fetcher.ts",
        "patchSetId": 1
      },
      "lineNbr": 99,
      "author": {
        "id": 1152670
      },
      "writtenOn": "2025-03-20T08:46:37Z",
      "side": 1,
      "message": "How would you determine when to redirect back to gerrit ?",
      "parentUuid": "40cec76b_d8f19b0e",
      "range": {
        "startLine": 99,
        "startChar": 31,
        "endLine": 99,
        "endChar": 53
      },
      "revId": "7fac805d8413b11d725c4aa095e990e9583a572b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "acda26a4_141a7a5b",
        "filename": "web/fetcher.ts",
        "patchSetId": 1
      },
      "lineNbr": 99,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2025-03-20T21:49:16Z",
      "side": 1,
      "message": "\u003e How would you determine when to redirect back to gerrit ?\n\nI think the Jenkins page would do it immediately. My expectation is that once you\u0027ve reached that page in Jenkins, auth should be complete. I don\u0027t know much about Jenkins auth, so if I\u0027m misunderstanding it, maybe this doesn\u0027t work.",
      "parentUuid": "235e9675_c7b156cc",
      "range": {
        "startLine": 99,
        "startChar": 31,
        "endLine": 99,
        "endChar": 53
      },
      "revId": "7fac805d8413b11d725c4aa095e990e9583a572b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "24b9166c_13d24690",
        "filename": "web/fetcher.ts",
        "patchSetId": 1
      },
      "lineNbr": 99,
      "author": {
        "id": 1152670
      },
      "writtenOn": "2025-03-25T04:53:21Z",
      "side": 1,
      "message": "We have saml plugin installed on our jenkins server which takes care of SSO and page redirection. How it works is like this:\n\n- User goes to a jenkins page\n- REST API returns 403\n- This triggers the saml plugin to initiate login\n- Once login is complete, saml plugin is informed using the `finishLogin` endpoint\n- saml plugin redirects to the url user initially accessed\n\nThe only way I believe we can redirect back to gerrit is by having a listener to check if the sign in process is complete, but if that\u0027s acceptable we can add the listener in this project as well when we create the login popup and refresh the page once user is signed in.",
      "parentUuid": "acda26a4_141a7a5b",
      "range": {
        "startLine": 99,
        "startChar": 31,
        "endLine": 99,
        "endChar": 53
      },
      "revId": "7fac805d8413b11d725c4aa095e990e9583a572b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}